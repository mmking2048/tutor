*-----------------------------------------------------------
* Title      : ECE 441 Design Project
* Written by : Michelle Yang
* Date       : 11/9/2018
* Description: Simple operating system for Easy 68K
*-----------------------------------------------------------
*-----------------------------------------------------------
* Data segment
*-----------------------------------------------------------
        ORG     $1000
        
PROMPT  DC.B    'MONITOR441> '  ;prompt
        DC.B    $00

INPUT   DS.B    80              ;buffer for commands

COMP_TABL                       ;table of all commands
        DC.B    'HELP'          ;note the padding is to control
        DC.B    $0000           ;the command strings to 6 bytes
        DC.B    'MDSP'
        DC.B    $0000
        DC.B    'SORTW'
        DC.B    $00
        DC.B    'MM'
        DC.B    $00000000
        DC.B    'MS'
        DC.B    $00000000
        DC.B    'BF'
        DC.B    $00000000
        DC.B    'BMOV'
        DC.B    $0000
        DC.B    'BTST'
        DC.B    $0000
        DC.B    'BSCH'
        DC.B    $0000
        DC.B    'GO'
        DC.B    $000000
        DC.B    'DF'
        DC.B    $000000
        DC.B    'EXIT'
        DC.B    $0000

COMP_ADDR                       ;table of handlers
        DC.B    'beep'

*-----------------------------------------------------------
* Program segment
*-----------------------------------------------------------        
        ORG     $3000
*Start here: set up and call to main        
START                           ;set up here
        BSR     MAIN            ;call main
        
        MOVE.B  #9,D0           ;exit program
        TRAP    #15
        
* Main method
MAIN    MOVEA.L #PROMPT,A1
        MOVE.B  #14,D0
        TRAP    #15             ;print prompt
        
        MOVEA.L #INPUT,A1
        MOVE.B  #2,D0
        TRAP    #15             ;read command
        
        BRA     MAIN            ;get next command
        
EXITMAIN    RTS

*-----------------------------------------------------------
* Parse commands
*-----------------------------------------------------------
PARSE   MOVEM.L A1/A2,-(SP)     ;save registers
        MOVEA.L #INPUT,A1       ;get front of string
NEXTC   CMP.B   #$20,(A1)
        BEQ     NEXTC           ;ignore spaces
        
        MOVEA.L #COMP_TBL,A2    ;get item in command string table
        MOVEA.L #COMP_TBL,A3
        
PHELP   

NHELP

PMDSP


PSORTW
PMM
PMS
PBF
        
        MOVEM.L (SP)+,A1/A2     ;restore registers
EXITPARSE   RTS

*-----------------------------------------------------------
* HELP
*-----------------------------------------------------------

*-----------------------------------------------------------
* MDSP
*-----------------------------------------------------------

*-----------------------------------------------------------
* SORTW
*-----------------------------------------------------------

*-----------------------------------------------------------
* MM
*-----------------------------------------------------------

*-----------------------------------------------------------
* MS
*-----------------------------------------------------------

*-----------------------------------------------------------
* BF
*-----------------------------------------------------------

*-----------------------------------------------------------
* BMOV
*-----------------------------------------------------------

*-----------------------------------------------------------
* BTST
*-----------------------------------------------------------

*-----------------------------------------------------------
* BSCH
*-----------------------------------------------------------

*-----------------------------------------------------------
* GO
*-----------------------------------------------------------

*-----------------------------------------------------------
* DF
*-----------------------------------------------------------

*-----------------------------------------------------------
* EXIT
*-----------------------------------------------------------

        END START

*~Font name~Courier New~
*~Font size~10~
*~Tab type~1~
*~Tab size~4~
